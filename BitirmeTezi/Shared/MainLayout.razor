@inherits LayoutComponentBase
@inject AuthenticationStateProvider authStateProvider
@inject NavigationManager navManager
@using BitirmeTezi.Authentication
<PageTitle>Admin</PageTitle>

<AuthorizeView>
    <Authorized>






        <main>



            <div class="layout-wrapper layout-content-navbar">
                <div class="layout-container">
                    <!-- Menu -->

                    <NavMenu />
                    <!-- / Menu -->
                    <!-- Layout container -->
                    <div class="layout-page">
                        <div class="top-row px-4">
                            <a class="btn btn-gray text-black" @onclick="LogOut" href="#">Logout</a>
                        </div>
                        <!-- Content wrapper -->
                        <div class="content-wrapper">
                            <!-- Content -->
                            
                            <div class="container-xxl flex-grow-1 container-p-y">
                                <!-- Layout Demo -->
                                <div>
                                    @Body
                                </div>
                                <!--/ Layout Demo -->
                            </div>
                            <!-- / Content -->
                            <!-- Footer -->
                            <footer class="content-footer footer bg-footer-theme">
                              
                            </footer>
                            <!-- / Footer -->

                            <div class="content-backdrop fade"></div>
                        </div>
                        <!-- Content wrapper -->
                    </div>
                    <!-- / Layout page -->
                </div>

                <!-- Overlay -->
                <div class="layout-overlay layout-menu-toggle"></div>
            </div>

        </main>





    </Authorized>
    <NotAuthorized>

       

       

            <div id="notfound">
                <div class="notfound">
                    <div class="notfound-404">
                        <h1>Oops!</h1>
                    </div>
                    <h2>404 - Page not found</h2>
                    <p>The page you are looking for might have been removed had its name changed or is temporarily unavailable.</p>
                    <a href="/">Go To Homepage</a>
                </div>
            </div>

        

        


    </NotAuthorized>
</AuthorizeView>


@code {
    private async Task LogOut()
    {
        var customAuthStateProvider = (CustomAuthenticationStateProvider)authStateProvider;
        await customAuthStateProvider.UpdateAuthenticationState(null);
        navManager.NavigateTo("login", true);
    }
}